{% extends "mobile/base.html" %}
{% load static %}
{% load compile_static %}
{% load custom_filters %}

{% block css %}
    <link rel="stylesheet" href="{% static 'less/mobile/chat.less'|compile %}">
{% endblock %}

{% block js %}
    <script src="{% static "channels/js/websocketbridge.js" %}" type="text/javascript"></script>
    <script>
        var ws_path = '{{ chat_host }}/?session_key={{ request.session.session_key }}';
        var active = '{{ active }}';
        var my_id = {{ request.user.id }};
        var photo = '{% if opponent.profile.photo %}{{ opponent.profile.photo.url }}{% else %}{% static "image/icon/profile_empty.png" %}{% endif %}';
        var room_id = {{ room_id }};
    </script>
    <script src="{% static 'js/chat.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="all_wrapper">
        <div class="title">메신저</div>
        <div class="subtitle">{{ opponent.profile.full_name }} 님과의 대화</div>
    <div id="chats"></div>
    </div>
{% endblock %}
